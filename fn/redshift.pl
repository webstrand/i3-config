#!/usr/bin/perl
use strict;
use warnings;
use v5.24;

my %map  = (
6230 => 1.0, 1.0 => 6230,
5686 => 1.1, 1.1 => 5686,
5218 => 1.2, 1.2 => 5218,
4820 => 1.3, 1.3 => 4820,
4489 => 1.4, 1.4 => 4489,
4204 => 1.5, 1.5 => 4204,
3957 => 1.6, 1.6 => 3957,
3740 => 1.7, 1.7 => 3740,
3550 => 1.8, 1.8 => 3550,
3380 => 1.9, 1.9 => 3380,
3230 => 2.0, 2.0 => 3230,
3096 => 2.1, 2.1 => 3096,
2976 => 2.2, 2.2 => 2976,
2868 => 2.3, 2.3 => 2868,
2771 => 2.4, 2.4 => 2771,
2683 => 2.5, 2.5 => 2683,
2605 => 2.6, 2.6 => 2605,
2534 => 2.7, 2.7 => 2534,
2470 => 2.8, 2.8 => 2470,
2413 => 2.9, 2.9 => 2413,
2362 => 3.0, 3.0 => 2362,
2315 => 3.1, 3.1 => 2315,
2273 => 3.2, 3.2 => 2273,
2236 => 3.3, 3.3 => 2236,
2201 => 3.4, 3.4 => 2201,
2172 => 3.5, 3.5 => 2172,
2145 => 3.6, 3.6 => 2145,
2120 => 3.7, 3.7 => 2120,
2098 => 3.8, 3.8 => 2098,
2081 => 3.9, 3.9 => 2081,
2064 => 4.0, 4.0 => 2064,
2049 => 4.1, 4.1 => 2049,
2035 => 4.2, 4.2 => 2035,
2022 => 4.3, 4.3 => 2022,
2010 => 4.4, 4.4 => 2010,
2000 => 4.5, 4.5 => 2000,
);

my ($mod) = @ARGV;

my ($gamma) = `xrandr --verbose` =~ /Gamma:\s+[\d.]+:[\d.]+:([\d.]+)/;
$gamma //= 1.0;

if(defined $mod) {
    if($mod eq "+") {
        $gamma -= 0.1;
    }
    elsif($mod eq "-") {
        $gamma += 0.1;
    }
}

my $temperature = $map{$gamma};
if(defined $temperature) {
	exec "redshift", "-O", $temperature;
}
